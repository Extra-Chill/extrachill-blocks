(()=>{"use strict";const e=window.React,t=window.wp.blocks,l=window.wp.blockEditor,n=window.wp.components,r=window.wp.i18n,a=window.wp.data,o=window.wp.element,s=JSON.parse('{"UU":"extrachill-blocks/ai-adventure"}'),c=e=>e&&Array.isArray(e)?e.map(e=>({name:e.name,attributes:e.attributes,innerBlocks:c(e.innerBlocks)})):[];(0,t.registerBlockType)(s.UU,{edit:({attributes:t,setAttributes:s,clientId:i})=>{const d=(0,l.useBlockProps)({className:"extrachill-block-window"}),{title:m,adventurePrompt:h,gameMasterPersona:p}=t,w=(0,a.useSelect)(e=>e("core/block-editor").getBlocksByClientId(i)[0]?.innerBlocks,[i]);return(0,o.useEffect)(()=>{const e=JSON.stringify(c(w));e!==t.innerBlocksJSON&&s({innerBlocksJSON:e})},[w,t.innerBlocksJSON,s]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(n.PanelBody,{title:(0,r.__)("AI Settings","extrachill-blocks")},(0,e.createElement)(n.TextareaControl,{label:(0,r.__)("Game Master Persona","extrachill-blocks"),value:p,onChange:e=>s({gameMasterPersona:e}),help:(0,r.__)("Define the personality and role of the AI storyteller.","extrachill-blocks")}))),(0,e.createElement)("div",{...d},(0,e.createElement)(l.RichText,{tagName:"h2",className:"adventure-title",onChange:e=>s({title:e}),value:m,placeholder:(0,r.__)("Enter Adventure Title","extrachill-blocks")}),(0,e.createElement)(l.RichText,{tagName:"p",className:"adventure-prompt",onChange:e=>s({adventurePrompt:e}),value:h,placeholder:(0,r.__)("Adventure Description: Describe the overall plot in 2-3 sentences. This will be shown to the player before they start.","extrachill-blocks")}),(0,e.createElement)(l.InnerBlocks,{allowedBlocks:["extrachill-blocks/ai-adventure-path"]})))},save:({attributes:t})=>(0,e.createElement)(l.InnerBlocks.Content,null)})})();